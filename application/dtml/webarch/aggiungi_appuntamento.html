<!-- aggiungi_appuntamento.html -->
<section id="aggiungi_appuntamento" class="dashboard-container">
  <!-- Titolo Pagina -->
  <div class="page-header mb-4">
    <h1>Aggiungi Appuntamento</h1>
  </div>

  <!-- MESSAGGIO ESITO -->
  <div class="mb-3">
    <[messaggio_form]>
  </div>

  <!-- FORM UNIFICATO: CREA RICHIESTA + CREA APPUNTAMENTO -->
  <div class="panel">
    <div class="panel-header">
      <h4>
        <i class="fas fa-calendar-plus me-2"></i>Nuovo Appuntamento
      </h4>
    </div>
    <div class="panel-body">
      <form id="form-aggiungi-appuntamento"
            action="index.php?page=aggiungi_appuntamento&action=save"
            method="post">

        <!-- SEZIONE 1: DATI CLIENTE e RICHIESTA -->
        <div class="mb-4">
          <h5 class="mb-3"><i class="fas fa-info-circle me-2"></i>Dati Cliente e Richiesta</h5>
          <div class="row g-3">
            <!-- Nome -->
            <div class="col-md-4">
              <label class="form-label"><strong>Nome*</strong></label>
              <input
                type="text"
                class="form-control"
                name="nome"
                value="<[old_nome]>"
                required
              >
            </div>
            <!-- Cognome -->
            <div class="col-md-4">
              <label class="form-label"><strong>Cognome*</strong></label>
              <input
                type="text"
                class="form-control"
                name="cognome"
                value="<[old_cognome]>"
                required
              >
            </div>
            <!-- E-mail -->
            <div class="col-md-4">
              <label class="form-label"><strong>E-mail*</strong></label>
              <input
                type="email"
                class="form-control"
                name="email"
                value="<[old_email]>"
                required
              >
            </div>
            <!-- Telefono -->
            <div class="col-md-4">
              <label class="form-label"><strong>Telefono</strong></label>
              <input
                type="tel"
                class="form-control"
                name="telefono"
                value="<[old_telefono]>"
              >
            </div>
            <!-- Data di Nascita -->
            <div class="col-md-4">
              <label class="form-label"><strong>Data di Nascita</strong></label>
              <input
                type="date"
                class="form-control"
                name="data_nascita"
                value="<[old_data_nascita]>"
              >
            </div>
            <!-- Sesso -->
            <div class="col-md-4">
              <label class="form-label"><strong>Sesso</strong></label>
              <select class="form-control" name="sesso">
                <option value="">-- Seleziona Sesso --</option>
                <option value="Maschio"   <[sel_sesso_Maschio]>  >Maschio</option>
                <option value="Femmina"   <[sel_sesso_Femmina]>  >Femmina</option>
                <option value="Altro"     <[sel_sesso_Altro]>    >Altro</option>
              </select>
            </div>
            <!-- Servizio Richiesto -->
            <div class="col-md-4">
              <label class="form-label"><strong>Servizio richiesto*</strong></label>
              <select class="form-control" name="servizio_id" required>
                <option value="">-- Seleziona Servizio --</option>
                <[lista_servizi]>
              </select>
            </div>
            
          </div>
        </div>

        <!-- SEZIONE 2: DATI APPUNTAMENTO -->
        <div class="mb-4">
          <h5 class="mb-3"><i class="fas fa-clock me-2"></i>Dettagli Appuntamento</h5>
          <div class="row g-3">
            <!-- Data Appuntamento -->
            <div class="col-md-4">
              <label class="form-label"><strong>Data*</strong></label>
              <input
                type="date"
                class="form-control"
                name="data"
                value="<[old_data]>"
                required
              >
            </div>
            <!-- Orario -->
            <div class="col-md-4">
              <label class="form-label"><strong>Orario*</strong></label>
              <input
                type="time"
                class="form-control"
                name="orario"
                value="<[old_orario]>"
                required
              >
            </div>
            <!-- Sala -->
            <div class="col-md-4">
              <label class="form-label"><strong>Sala*</strong></label>
              <select class="form-control" name="sala_id" required>
                <option value="">-- Seleziona Sala --</option>
                <[lista_sale]>
              </select>
            </div>
          </div>
        </div>

        <!-- PULSANTI Salva / Annulla -->
        <div class="d-flex gap-3">
          <button type="submit" class="btn btn-primary-modern btn-xs">
            <i class="fas fa-save me-1"></i>Salva Appuntamento
          </button>
          <a href="index.php?page=appuntamenti" class="btn btn-outline-modern btn-xs">
            <i class="fas fa-times me-1"></i>Annulla
          </a>
        </div>
      </form>
    </div>
  </div>
</section>
